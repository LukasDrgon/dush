{"version":3,"file":"dush.umd.js","sources":["../src/index.js"],"sourcesContent":["/*!\n * dush <https://github.com/tunnckoCore/dush>\n *\n * Copyright (c) Charlike Mike Reagent <@tunnckoCore> (https://i.am.charlike.online)\n * Released under the MIT license.\n */\n\n'use strict'\n\n/**\n * > A constructor function that returns an object\n * with a few methods.\n *\n * See [JSBin Example](http://jsbin.com/mepemeluhi/edit?js,console).\n *\n * **Example**\n *\n * ```js\n * const dush = require('dush')\n * const emitter = dush()\n *\n * console.log(emitter.all) // => {}\n * console.log(emitter.on) // => Function\n * console.log(emitter.once) // => Function\n * console.log(emitter.off) // => Function\n * console.log(emitter.emit) // => Function\n * ```\n *\n * @name   dush()\n * @return {Object} methods\n * @api public\n */\n\nexport default function dush () {\n  const all = Object.create(null)\n  const app = {\n    /**\n     * > An listeners map of all registered events\n     * and their listeners. A key/value store, where 1) value\n     * is an array of event listeners for the key and 2) key\n     * is the name of the event.\n     *\n     * See [JSBin Example](http://jsbin.com/zuwayalovi/edit?js,console).\n     *\n     * **Example**\n     *\n     * ```js\n     * const emitter = dush()\n     *\n     * emitter.on('foo', () => {})\n     * emitter.on('foo', () => {})\n     * emitter.on('bar', () => {})\n     *\n     * console.log(emitter.all)\n     * // => { foo: [Function, Function], bar: [Functon] }\n     * ```\n     *\n     * @name  .all\n     * @type {Object} `all` a key/value store of all events and their listeners\n     * @api public\n     */\n\n    all,\n\n    /**\n     * > Add `handler` for `name` event.\n     *\n     * See [JSBin Example](http://jsbin.com/xeketuruto/edit?js,console).\n     *\n     * **Example**\n     *\n     * ```js\n     * const emitter = dush()\n     *\n     * emitter\n     *   .on('hi', (place) => {\n     *     console.log(`hello ${place}!`) // => 'hello world!'\n     *   })\n     *   .on('hi', (place) => {\n     *     console.log(`hi ${place}, yeah!`) // => 'hi world, yeah!'\n     *   })\n     *\n     * emitter.emit('hi', 'world')\n     * ```\n     *\n     * @name   .on\n     * @param  {String} `name` Type of event to listen for, or `'*'` for all events\n     * @param  {Function} `handler` Function to call in response to given event\n     * @return {Object} The `dush` instance for chaining\n     * @api public\n     */\n\n    on (name, handler) {\n      let e = all[name] || (all[name] = [])\n      e.push(handler)\n\n      return app\n    },\n\n    /**\n     * > Add `handler` for `name` event that\n     * will be called only one time.\n     *\n     * See [JSBin Example](http://jsbin.com/teculorima/edit?js,console).\n     *\n     * **Example**\n     *\n     * ```js\n     * const emitter = dush()\n     * let called = 0\n     *\n     * emitter.once('foo', () => {\n     *   console.log('called only once')\n     *   called++\n     * })\n     *\n     * emitter\n     *   .emit('foo', 111)\n     *   .emit('foo', 222)\n     *   .emit('foo', 333)\n     *\n     * console.log(called) // => 1\n     * ```\n     *\n     * @name   .once\n     * @param  {String} `name` Type of event to listen for, or `'*'` for all events\n     * @param  {Function} `handler` Function to call in response to given event\n     * @return {Object} The `dush` instance for chaining\n     * @api public\n     */\n\n    once (name, handler) {\n      function fn (a, b, c) {\n        app.off(name, fn)\n        handler(a, b, c)\n      }\n\n      return app.on(name, fn)\n    },\n\n    /**\n     * > Remove `handler` for `name` event. If `handler` not\n     * passed will remove **all** listeners for that `name` event.\n     *\n     * See [JSBin Example](http://jsbin.com/nujucoquvi/3/edit?js,console).\n     *\n     * **Example**\n     *\n     * ```js\n     * const emitter = dush()\n     *\n     * const handler = () => {\n     *   console.log('not called')\n     * }\n     *\n     * emitter.on('foo', handler)\n     * emitter.off('foo', handler)\n     *\n     * emitter.on('foo', (abc) => {\n     *   console.log('called', abc) // => 'called 123'\n     * })\n     * emitter.emit('foo', 123)\n     *\n     * // or removing all listeners of `foo`\n     * emitter.off('foo')\n     * emitter.emit('foo')\n     * ```\n     *\n     * @name   .off\n     * @param  {String} `name` Type of event to listen for, or `'*'` for all events\n     * @param  {Function} `handler` Function to call in response to given event\n     * @return {Object} The `dush` instance for chaining\n     * @api public\n     */\n\n    off (name, handler) {\n      if (handler && all[name]) {\n        all[name].splice(all[name].indexOf(handler) >>> 0, 1)\n      } else {\n        all[name] = []\n      }\n\n      return app\n    },\n\n    /**\n     * > Invoke all handlers for given `name` event.\n     * If present, `'*'` listeners are invoked too with `(type, ...rest)` signature,\n     * where the `type` argument is a string representing the name of the\n     * called event; and all of the rest arguments.\n     *\n     * See [JSBin Example](http://jsbin.com/muqujavolu/edit?js,console).\n     *\n     * **Example**\n     *\n     * ```js\n     * const emitter = dush()\n     *\n     * emitter.on('foo', (a, b, c) => {\n     *   console.log(`${a}, ${b}, ${c}`) // => 1, 2, 3\n     * })\n     *\n     * emitter.on('*', (name, a, b, c) => {\n     *   console.log(`name is: ${name}`)\n     *   console.log(`rest args are: ${a}, ${b}, ${c}`)\n     * })\n     *\n     * emitter.emit('foo', 1, 2, 3)\n     * emitter.emit('bar', 555)\n     * ```\n     *\n     * @name   .emit\n     * @param  {String} `name` The name of the event to invoke\n     * @param  {any} `args` Any number of arguments of any type of value, passed to each listener\n     * @return {Object} The `dush` instance for chaining\n     * @api public\n     */\n\n    emit (name, a, b, c) {\n      (all[name] || []).map((handler) => { handler(a, b, c) });\n      (all['*'] || []).map((handler) => { handler(name, a, b, c) })\n\n      return app\n    }\n  }\n\n  return app\n}\n"],"names":["dush","const","all","Object","create","app","on","name","handler","let","e","push","once","fn","a","b","c","off","splice","indexOf","emit","map"],"mappings":"mKAiCA,QAAwBA,KACtBC,GAAMC,GAAMC,OAAOC,OAAO,MACpBC,GA2BJH,IAAAA,EA8BAI,YAAIC,EAAMC,GACRC,GAAIC,GAAIR,EAAIK,KAAUL,EAAIK,MAG1B,OAFAG,GAAEC,KAAKH,GAEAH,GAmCTO,cAAML,EAAMC,GACV,QAASK,GAAIC,EAAGC,EAAGC,GACjBX,EAAIY,IAAIV,EAAMM,GACdL,EAAQM,EAAGC,EAAGC,GAGhB,MAAOX,GAAIC,GAAGC,EAAMM,IAsCtBI,aAAKV,EAAMC,GAOT,MANIA,IAAWN,EAAIK,GACjBL,EAAIK,GAAMW,OAAOhB,EAAIK,GAAMY,QAAQX,KAAa,EAAG,GAEnDN,EAAIK,MAGCF,GAoCTe,cAAMb,EAAMO,EAAGC,EAAGC,GAIhB,OAHCd,EAAIK,QAAac,IAAI,SAACb,GAAcA,EAAQM,EAAGC,EAAGC,MAClDd,EAAI,UAAYmB,IAAI,SAACb,GAAcA,EAAQD,EAAMO,EAAGC,EAAGC,KAEjDX,GAIX,OAAOA"}